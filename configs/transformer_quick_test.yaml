# Transformer Quick Test Configuration
# For rapid validation of implementation (10 epochs)

# Data settings
data:
  splits_dir: data/processed/splits
  audio_feature_dir: data/processed/audio_features
  parameter_dir: data/processed/parameters
  audio_feature_type: mel  # 'mel' or 'mfcc'
  parameter_type: geometric  # 'geometric' or 'pca'
  sequence_length: 100  # Split into 100-frame sequences (null = use full utterances)

# Model settings
model:
  name: Transformer
  input_dim: 80  # 80 for mel-spectrogram, 13 for MFCC
  d_model: 128  # Smaller for quick test (full: 256)
  num_layers: 2  # Fewer layers for quick test (full: 4)
  num_heads: 4  # Fewer heads for quick test (full: 8)
  d_ff: 512  # Smaller FFN (full: 1024)
  output_dim: 14  # 14 for geometric, 10 for PCA
  dropout: 0.1
  pos_encoding: learnable  # 'sinusoidal' or 'learnable'
  activation: gelu
  learning_rate: 0.0005
  weight_decay: 0.01
  max_seq_len: 5000

# Training settings
training:
  batch_size: 8
  num_epochs: 10  # Quick test
  num_workers: 0  # Single-threaded to avoid worker crashes
  accumulate_grad_batches: 1
  gradient_clip_val: 1.0
  precision: 32  # Use 32 for CPU, 16 for GPU

# Optimization
optimization:
  optimizer: AdamW
  learning_rate: 0.0005
  weight_decay: 0.01
  betas: [0.9, 0.98]
  lr_scheduler: CosineAnnealingWarmRestarts
  lr_scheduler_params:
    T_0: 5  # Restart every 5 epochs (quick test)
    T_mult: 2
    eta_min: 0.000001

# Callbacks
callbacks:
  early_stopping:
    monitor: val_loss
    patience: 5  # Shorter patience for quick test
    mode: min
    verbose: true
  model_checkpoint:
    monitor: val_loss
    mode: min
    save_top_k: 2
    save_last: true
    filename: "transformer-quick-{epoch:02d}-{val_loss:.4f}"

# Logging
logging:
  experiment_name: transformer_quick_test
  log_dir: logs/training
  save_dir: models/transformer_quick
  log_every_n_steps: 5

# Evaluation
evaluation:
  metrics:
    - rmse
    - mae
    - pearson_correlation
  visualize_predictions: true
  num_samples_to_visualize: 3

# Reproducibility
seed: 42

# Hardware
device: cpu  # 'cpu' or 'cuda'
